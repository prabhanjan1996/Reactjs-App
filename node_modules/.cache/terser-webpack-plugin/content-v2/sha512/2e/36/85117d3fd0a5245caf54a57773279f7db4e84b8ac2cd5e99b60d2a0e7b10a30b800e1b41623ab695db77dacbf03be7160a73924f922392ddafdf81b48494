{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{212:function(e,t,a){\"use strict\";a.r(t);var s=a(0),r=a.n(s),c=a(14),l=a(15),n=a(2),o=a.n(n),i=a(3);t.default=function(){const e=Object(s.useContext)(c.a),[t,a]=Object(l.a)({searchTerm:\"\",results:[],show:\"neither\",requestCount:0});function n(t){27==t.keyCode&&e({type:\"closeSearch\"})}return Object(s.useEffect)(()=>(document.addEventListener(\"keyup\",n),()=>document.removeEventListener(\"keyup\",n)),[]),Object(s.useEffect)(()=>{if(t.searchTerm.trim()){a(e=>{e.show=\"loading\"});const e=setTimeout(()=>{a(e=>{e.requestCount++})},750);return()=>clearTimeout(e)}a(e=>{e.show=\"neither\"})},[t.searchTerm]),Object(s.useEffect)(()=>{if(t.requestCount){const e=o.a.CancelToken.source();return async function(){try{const s=await o.a.post(\"/search\",{searchTerm:t.searchTerm},{cancelToken:e.token});a(e=>{e.results=s.data,e.show=\"results\"})}catch(e){console.log(\"There was a problem or the request was cancelled.\")}}(),()=>e.cancel()}},[t.requestCount]),r.a.createElement(r.a.Fragment,null,r.a.createElement(\"div\",{className:\"search-overlay-top shadow-sm\"},r.a.createElement(\"div\",{className:\"container container--narrow\"},r.a.createElement(\"label\",{htmlFor:\"live-search-field\",className:\"search-overlay-icon\"},r.a.createElement(\"i\",{className:\"fas fa-search\"})),r.a.createElement(\"input\",{onChange:function(e){const t=e.target.value;a(e=>{e.searchTerm=t})},autoFocus:!0,type:\"text\",autoComplete:\"off\",id:\"live-search-field\",className:\"live-search-field\",placeholder:\"What are you interested in?\"}),r.a.createElement(\"span\",{onClick:()=>e({type:\"closeSearch\"}),className:\"close-live-search\"},r.a.createElement(\"i\",{className:\"fas fa-times-circle\"})))),r.a.createElement(\"div\",{className:\"search-overlay-bottom\"},r.a.createElement(\"div\",{className:\"container container--narrow py-3\"},r.a.createElement(\"div\",{className:\"circle-loader \"+(\"loading\"==t.show?\"circle-loader--visible\":\"\")}),r.a.createElement(\"div\",{className:\"live-search-results \"+(\"results\"==t.show?\"live-search-results--visible\":\"\")},Boolean(t.results.length)&&r.a.createElement(\"div\",{className:\"list-group shadow-sm\"},r.a.createElement(\"div\",{className:\"list-group-item active\"},r.a.createElement(\"strong\",null,\"Search Results\"),\" (\",t.results.length,\" \",t.results.length>1?\"items\":\"item\",\" found)\"),t.results.map(t=>{const a=new Date(t.createdDate),s=`${a.getMonth()+1}/${a.getDate()}/${a.getFullYear()}`;return r.a.createElement(i.b,{onClick:()=>e({type:\"closeSearch\"}),key:t._id,to:\"/post/\"+t._id,className:\"list-group-item list-group-item-action\"},r.a.createElement(\"img\",{className:\"avatar-tiny\",src:t.author.avatar}),\" \",r.a.createElement(\"strong\",null,t.title),\" \",r.a.createElement(\"span\",{className:\"text-muted small\"},\"by \",t.author.username,\" on \",s,\" \"))})),!Boolean(t.results.length)&&r.a.createElement(\"p\",{className:\"alert alert-danger text-center shadow-sm\"},\"Sorry, we could not find any results for that search.\")))))}}}]);","extractedComments":[]}